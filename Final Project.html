
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Task Manager - Acceptance Criteria Ready</title>

  <style>
    /* ============================
       Design Tokens (CSS Variables)
       ============================ */
    :root {
      --bg: #f0f2f7;
      --surface: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --border: #c9d4e3;

      --primary-1: #1e90ff;
      --primary-2: #6aa8ff;

      --red-strong: #ff4d4d;
      --red-strong-hover: #e60000;
      --green-soft: #ccffcc;
      --green-text: #065f46;

      --priority-high: #ff4d4d;
      --priority-medium: #ffae42;
      --priority-low: #4CAF50;

      --important-bg: #ffe5e5;
    }

    /* ==============
       Base Styles
       ============== */
    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: Arial, sans-serif;
    }

    main {
      padding: 20px;
      max-width: 860px;
      margin: 0 auto;
    }

    h2 {
      margin: 0 0 16px 0;
      font-weight: 800;
      letter-spacing: 0.3px;
    }

    .composer {
      margin-bottom: 12px;
    }

    /* ===================
       Controls & Inputs
       =================== */
    .controls {
      display: grid;
      grid-template-columns: 1fr auto auto auto;
      gap: 10px;
      align-items: center;
      margin-bottom: 8px;
    }

    #taskName, #taskPriority {
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--surface);
    }

    .controls label {
      background: var(--surface);
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #e0e6ef;
      user-select: none;
    }

    /* ===============
       Primary Button
       =============== */
    .btn-primary {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 100%;                /* Full width for strong emphasis */
      padding: 14px 18px;
      font-weight: 800;
      letter-spacing: .3px;
      border-radius: 12px;
      color: #ffffff;
      background: linear-gradient(135deg, var(--primary-1), var(--primary-2));
      box-shadow: 0 8px 16px rgba(30, 144, 255, 0.35);
      transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
      border: 2px solid rgba(255,255,255,.4);
      margin-top: 8px;
      cursor: pointer;
    }
    .btn-primary:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: 0 12px 22px rgba(30, 144, 255, 0.45);
      filter: brightness(1.05);
    }
    .btn-primary:focus-visible {
      outline: none;
      box-shadow:
        0 0 0 3px #ffffff,
        0 0 0 6px rgba(30, 144, 255, 0.85);
    }
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      box-shadow: none;
    }

    /* ===========
       Task Cards
       =========== */
    #taskmanager {
      margin-top: 20px;
    }

    .task {
      background: var(--surface);
      padding: 12px;
      border-radius: 8px;
      margin: 10px 0;
      box-shadow: 0px 2px 6px rgba(0,0,0,0.1);
      border-left: 10px solid gray;
      transition: transform .15s;
    }
    .task:hover {
      transform: scale(1.02);
    }

    .priority-High   { border-left-color: var(--priority-high); }
    .priority-Medium { border-left-color: var(--priority-medium); }
    .priority-Low    { border-left-color: var(--priority-low); }

    .important {
      background: var(--important-bg);
    }
    .completed {
      text-decoration: line-through;
      opacity: 0.7;
    }

    .meta {
      color: var(--muted);
      font-size: 0.85em;
    }

    /* ============
       Action Buttons
       ============ */
    .actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 8px;
    }
    .actions button {
      border: none;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9em;
    }

    /* Stronger red for Important */
    .btn-important {
      background: var(--red-strong);
      color: #fff;
      font-weight: bold;
    }
    .btn-important:hover {
      background: var(--red-strong-hover);
    }

    /* Green for Done */
    .btn-complete {
      background: var(--green-soft);
      color: var(--green-text);
      font-weight: bold;
    }

    /* Delete button: link style (no background color) */
    .btn-delete {
      background: none;
      color: #333;
      font-weight: bold;
      padding: 6px;
    }
    .btn-delete:hover {
      text-decoration: underline;
      color: var(--red-strong);
    }

    /* ==============
       Responsiveness
       ============== */
    @media (max-width: 640px) {
      .controls {
        grid-template-columns: 1fr 1fr;
        grid-auto-rows: auto;
      }
      .controls label {
        display: flex;
        align-items: center;
        gap: 8px;
      }
    }
  </style>
</head>

<body>
  <main>
    <h2>Task Manager</h2>

    <!-- Composer: inputs + Add button -->
    <section class="composer" aria-label="Task creation">
      <div class="controls" role="group" aria-label="Task creation controls">
        <input id="taskName" type="text" placeholder="Task name" aria-label="Task name">
        <select id="taskPriority" aria-label="Priority">
          <option>High</option>
          <option selected>Medium</option>
          <option>Low</option>
        </select>

        <label><input type="checkbox" id="taskImportant"> Important</label>
        <label><input type="checkbox" id="taskCompleted"> Completed</label>
      </div>

      <button id="btnAdd" class="btn-primary" aria-label="Add task">Add Task</button>
    </section>

    <hr>

    <!-- Task list -->
    <section id="taskmanager" aria-live="polite" aria-label="Task list"></section>
  </main>

  <script>
    /**
     * Task Manager â€” Acceptance Criteria Implementation
     * -------------------------------------------------
     * Functional coverage:
     *  - Add tasks with name, priority, important, completed, timestamp
     *  - Toggle Important / Completed / Delete
     *  - Render with priority styles, important highlight, completed style
     *  - Full-width Add button, distinct styling, accessible controls
     *  - Console logging of all actions with timestamps + console.table
     * Structure & documentation:
     *  - Clear, modular functions
     *  - JSDoc-style annotations
     *  - Event delegation for task actions
     */

    /** @type {{id:number,name:string,priority:'High'|'Medium'|'Low',isImportant:boolean,isCompleted:boolean,date:string}[]} */
    let tasks = [];
    let nextId = 1;

    // DOM references
    const els = {
      nameInput: document.getElementById('taskName'),
      prioritySelect: document.getElementById('taskPriority'),
      importantCheckbox: document.getElementById('taskImportant'),
      completedCheckbox: document.getElementById('taskCompleted'),
      btnAdd: document.getElementById('btnAdd'),
      list: document.getElementById('taskmanager'),
    };

    /**
     * Utility: format current timestamp for logs.
     * @returns {string}
     */
    function now() {
      return new Date().toLocaleString();
    }

    /**
     * Utility: centralized console logging for actions.
     * Ensures acceptance criterion "Console logging accurately reflects task changes."
     * @param {string} action - Action name (Add, Delete, Toggle Important, Toggle Completed, Render)
     * @param {object} details - Additional info to log
     */
    function logAction(action, details = {}) {
      console.groupCollapsed(`[${now()}] ${action}`);
      if (details && Object.keys(details).length) {
        console.log('Details:', details);
      }
      console.table(tasks.map(t => ({
        id: t.id,
        name: t.name,
        priority: t.priority,
        important: t.isImportant,
        completed: t.isCompleted,
        date: t.date,
      })));
      console.groupEnd();
    }

    /**
     * Validate and update Add button enabled state.
     * Keeps UI intuitive and prevents accidental empty adds.
     */
    function updateAddButtonState() {
      els.btnAdd.disabled = els.nameInput.value.trim().length === 0;
    }

    // Keep button state in sync with input
    els.nameInput.addEventListener('input', updateAddButtonState);
    updateAddButtonState();

    /**
     * Add a new task from form inputs.
     */
    function addTask() {
      const name = els.nameInput.value.trim();
      if (!name) {
        alert('Task name cannot be empty.');
        return;
      }

      /** @type {typeof tasks[number]} */
      const task = {
        id: nextId++,
        name,
        priority: /** @type {'High'|'Medium'|'Low'} */(els.prioritySelect.value),
        isImportant: els.importantCheckbox.checked,
        isCompleted: els.completedCheckbox.checked,
        date: now(),
      };

      tasks.push(task);
      logAction('Add', { id: task.id, name: task.name });

      // Reset form state
      els.nameInput.value = '';
      updateAddButtonState();

      render();
    }

    /**
     * Delete a task.
     * @param {number} id
     */
    function deleteTask(id) {
      const before = tasks.length;
      tasks = tasks.filter(t => t.id !== id);
      const after = tasks.length;
      logAction('Delete', { id, removed: before - after });

      render();
    }

    /**
     * Toggle "Important" flag for a task.
     * @param {number} id
     */
    function toggleImportant(id) {
      const task = tasks.find(t => t.id === id);
      if (!task) return;
      task.isImportant = !task.isImportant;
      logAction('Toggle Important', { id, important: task.isImportant });

      render();
    }

    /**
     * Toggle "Completed" flag for a task.
     * @param {number} id
     */
    function toggleCompleted(id) {
      const task = tasks.find(t => t.id === id);
      if (!task) return;
      task.isCompleted = !task.isCompleted;
      logAction('Toggle Completed', { id, completed: task.isCompleted });

      render();
    }

    /**
     * Render all tasks into the list container.
     * Applies styling based on priority/important/completed.
     */
    function render() {
      els.list.innerHTML = '';

      tasks.forEach(task => {
        const card = document.createElement('article');
        card.className = `task priority-${task.priority}`;
        if (task.isImportant) card.classList.add('important');
        if (task.isCompleted) card.classList.add('completed');

        // Title
        const title = document.createElement('strong');
        title.textContent = task.name;
        card.appendChild(title);
        card.appendChild(document.createElement('br'));

        // Meta
        const meta = document.createElement('span');
        meta.className = 'meta';
        meta.textContent = `Added on: ${task.date}`;
        card.appendChild(meta);
        card.appendChild(document.createElement('br'));
        card.appendChild(document.createElement('br'));

        // Actions
        const actions = document.createElement('div');
        actions.className = 'actions';

        const btnImp = document.createElement('button');
        btnImp.className = 'btn-important';
        btnImp.textContent = 'Important';
        btnImp.setAttribute('data-action', 'important');
        btnImp.setAttribute('data-id', String(task.id));

        const btnDone = document.createElement('button');
        btnDone.className = 'btn-complete';
        btnDone.textContent = 'Done';
        btnDone.setAttribute('data-action', 'complete');
        btnDone.setAttribute('data-id', String(task.id));

        const btnDel = document.createElement('button');
        btnDel.className = 'btn-delete';
        btnDel.textContent = 'Delete';
        btnDel.setAttribute('data-action', 'delete');
        btnDel.setAttribute('data-id', String(task.id));

        actions.appendChild(btnImp);
        actions.appendChild(btnDone);
        actions.appendChild(btnDel);
        card.appendChild(actions);

        els.list.appendChild(card);
      });

      logAction('Render', { count: tasks.length });
    }

    // Event: Add Task button
    els.btnAdd.addEventListener('click', addTask);

    // Event Delegation for task actions (Important / Done / Delete)
    els.list.addEventListener('click', (ev) => {
      const target = ev.target;
      if (!(target instanceof HTMLElement)) return;
      const action = target.getAttribute('data-action');
      const idAttr = target.getAttribute('data-id');
      if (!action || !idAttr) return;

      const id = Number(idAttr);
      if (action === 'important') toggleImportant(id);
      else if (action === 'complete') toggleCompleted(id);
      else if (action === 'delete') deleteTask(id);
    });

    // Initial render (empty state)
    render();
  </script>
</body>
</html>
